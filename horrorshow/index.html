<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `horrorshow` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, horrorshow">

    <title>horrorshow - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'horrorshow', ty: 'mod', relpath: '../'};</script>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>horrorshow</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-0' class='srclink' href='../src/horrorshow/lib.rs.html#1-306' title='goto source code'>[src]</a></span></h1>
<div class='docblock'>
<h1 id="horrorshow" class='section-header'><a
                           href="#horrorshow">Horrorshow</a></h1>
<p>An html templating library.</p>

<h2 id="example:" class='section-header'><a
                           href="#example:">Example:</a></h2><pre class='rust rust-example-rendered'>
<span class='kw'>use</span> <span class='ident'>horrorshow</span>::<span class='ident'>prelude</span>::<span class='op'>*</span>;
<span class='kw'>let</span> <span class='ident'>actual</span> <span class='op'>=</span> <span class='macro'>html</span><span class='macro'>!</span> {
    <span class='ident'>html</span> {
        <span class='ident'>head</span> {
            <span class='ident'>title</span> { : <span class='string'>&quot;Hello world!&quot;</span> }
        }
        <span class='ident'>body</span> {
            <span class='comment'>// attributes</span>
            <span class='ident'>h1</span>(<span class='ident'>id</span><span class='op'>=</span><span class='string'>&quot;heading&quot;</span>) {
                <span class='comment'>// Insert escaped text</span>
                : <span class='string'>&quot;Hello! This is &lt;html /&gt;&quot;</span>
            }
            <span class='ident'>p</span> {
                <span class='comment'>// Insert raw text (unescaped)</span>
                : <span class='macro'>raw</span><span class='macro'>!</span>(<span class='string'>&quot;Let&#39;s &lt;i&gt;count&lt;/i&gt; to 10!&quot;</span>)
            }
            <span class='ident'>ol</span>(<span class='ident'>id</span><span class='op'>=</span><span class='string'>&quot;count&quot;</span>) {
                <span class='comment'>// run some inline code...</span>
                <span class='op'>|</span><span class='ident'>tmpl</span><span class='op'>|</span> <span class='kw'>for</span> <span class='ident'>i</span> <span class='kw'>in</span> <span class='number'>0</span>..<span class='number'>10</span> {
                    <span class='comment'>// append to the current template.</span>
                    <span class='comment'>// store output because rust bug #25753</span>
                    <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='op'>*</span><span class='ident'>tmpl</span> <span class='op'>&lt;&lt;</span> <span class='macro'>html</span><span class='macro'>!</span> {
                        <span class='ident'>li</span>(<span class='ident'>first</span>? <span class='op'>=</span> (<span class='ident'>i</span> <span class='op'>==</span> <span class='number'>0</span>)) {
                            <span class='comment'>// Format some text.</span>
                            : <span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;{}&quot;</span>, <span class='ident'>i</span><span class='op'>+</span><span class='number'>1</span>)
                        }
                    };
                }
            }
            <span class='comment'>// You need semi-colons for tags without children.</span>
            <span class='ident'>br</span>; <span class='ident'>br</span>;
            <span class='ident'>p</span> {
                : <span class='string'>&quot;Easy!&quot;</span>
            }
        }
    }
}.<span class='ident'>into_string</span>().<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='ident'>expected</span> <span class='op'>=</span> <span class='string'>&quot;\
&lt;html&gt;\
  &lt;head&gt;\
    &lt;title&gt;Hello world!&lt;/title&gt;\
  &lt;/head&gt;\
  &lt;body&gt;\
    &lt;h1 id=\&quot;heading\&quot;&gt;Hello! This is &amp;lt;html /&amp;gt;&lt;/h1&gt;\
    &lt;p&gt;Let&#39;s &lt;i&gt;count&lt;/i&gt; to 10!&lt;/p&gt;\
    &lt;ol id=\&quot;count\&quot;&gt;\
      &lt;li first&gt;1&lt;/li&gt;\
      &lt;li&gt;2&lt;/li&gt;\
      &lt;li&gt;3&lt;/li&gt;\
      &lt;li&gt;4&lt;/li&gt;\
      &lt;li&gt;5&lt;/li&gt;\
      &lt;li&gt;6&lt;/li&gt;\
      &lt;li&gt;7&lt;/li&gt;\
      &lt;li&gt;8&lt;/li&gt;\
      &lt;li&gt;9&lt;/li&gt;\
      &lt;li&gt;10&lt;/li&gt;\
    &lt;/ol&gt;\
    &lt;br /&gt;&lt;br /&gt;\
    &lt;p&gt;Easy!&lt;/p&gt;\
  &lt;/body&gt;\
&lt;/html&gt;&quot;</span>;
<span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>expected</span>, <span class='ident'>actual</span>);
</pre>

<h2 id="usage" class='section-header'><a
                           href="#usage">Usage</a></h2>
<p>Inside an html template, the following expressions are valid:</p>

<ul>
<li><p><code>some_tag;</code> -- Insert a the tag <code>some_tag</code>.</p></li>
<li><p><code>some_tag(attr=rust_expresion,...);</code> -- Insert a the tag <code>some_tag</code> with the specified
attributes. The attribute values will be evaluated as rust expressions at runtime and they
must implement RenderOnce (already implemented on &amp;str, String, other templates, etc.).</p></li>
<li><p><code>some_tag(attr,...);</code> -- You can also omit the value.</p></li>
<li><p><code>some_tag(attr? = Some(&quot;test&quot;),...);</code> -- You can optionally include an attribute.</p></li>
<li><p><code>some_tag(attr? = some_boolean,...);</code> -- You can optionally include an attribute without a value.</p></li>
<li><p><code>some_tag { ... }</code> -- Insert the tag <code>some_tag</code> and recursively evaluate the <code>...</code>.</p></li>
<li><p><code>some_tag(...) { ... }</code> -- Same as above but with custom attributes.</p></li>
<li><p><code>: rust_expression</code>, <code>: { rust_code }</code> -- Evaluate the expression or block and insert result
current position. To insert literal html, mark it as raw with the <code>raw!</code> macro.</p></li>
<li><p><code>|tmpl| rust_expression</code>, <code>|tmpl| { rust_code }</code> -- Evaluate the expression or block. This is
actually a closure so the block/expression can append to the current template through <code>tmpl</code>
(of type <code>&amp;mut TemplateBuffer</code>).</p></li>
</ul>

<h2 id="traits,-traits-oh-my!" class='section-header'><a
                           href="#traits,-traits-oh-my!">Traits, traits oh-my!</a></h2>
<p>You will likely notice that there are four render traits:</p>

<ol>
<li><code>RenderOnce</code></li>
<li><code>RenderMut</code></li>
<li><code>Render</code></li>
<li><code>RenderBox</code></li>
</ol>

<p>These three traits map to the four <code>Fn</code> traits and reflect the fact that some templates need
exclusive access (<code>RenderMut</code>) in order to be rendered and others might even consume their
environment (<code>RenderOnce</code>).</p>

<p>In general, just import <code>Template</code> into your environment (or import the prelude).</p>

<h2 id="error-handling" class='section-header'><a
                           href="#error-handling">Error Handling</a></h2>
<p>Both render and IO errors are handled in the background. If an io (or fmt) error occurs,
template rendering will continue but no more data will be written and the original <code>write_to_*</code>
call will return the error when rendering terminates. If you need to record a render error, use
<code>TemplateBuffer::record_error</code>. As with IO errors, custom errors DO NOT cause rendering to be
aborted. Instead, all recorded errors (if any) are returned when rendering completes.</p>

<p>TL;DR: There is no way to abort rendering but you can report errors.</p>

<h2 id="escaping" class='section-header'><a
                           href="#escaping">Escaping</a></h2>
<p>This library does HTML escaping by default. However, it doesn&#39;t do any javascript/URL escaping.
Furthermore, it will do html escaping in any literal javascript you might include.</p>

<p>For example, the following will display an alert:</p>

<pre><code class="language-norun">html! {
  script {
    : &quot;alert(&#39;hello&#39;);&quot;
  }
}
</code></pre>

<p>The following will break due to html escaping (the <code>&quot;</code> will be escaped to <code>&amp;quot;</code>):</p>

<pre><code class="language-norun">html! {
  script {
    : &#39;alert(&quot;hello&quot;);&#39;
  }
}
</code></pre>

<p>And the following will display as-is (but won&#39;t run any javascript) due to the HTML escaping:</p>

<pre><code class="language-norun">html! {
    : &#39;&lt;script&gt;alert(&quot;hello&quot;);&lt;/script&gt;&#39;
}
</code></pre>

<p>Output:</p>

<pre><code class="language-html">&amp;lt;script&amp;gt;alert(&amp;quot;hello&amp;quot;);&amp;lt;/script&amp;gt;
</code></pre>

<h2 id="returning-templates" class='section-header'><a
                           href="#returning-templates">Returning Templates</a></h2>
<p>To return a template directly, you have to create it using the <code>box_html!</code> macro instead of the
<code>html!</code> macro. The template type will be one of <code>Box&lt;RenderBox&gt;</code> (can be rendered once),
<code>Box&lt;RenderMut&gt;</code>, or <code>Box&lt;Render&gt;</code> depending on how the template affects its environment.</p>
<pre class='rust rust-example-rendered'>
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>horrorshow</span>;

<span class='kw'>use</span> <span class='ident'>horrorshow</span>::{<span class='ident'>RenderOnce</span>, <span class='ident'>RenderBox</span>, <span class='ident'>RenderMut</span>, <span class='ident'>Render</span>};

<span class='comment'>// Consume the environment</span>
<span class='kw'>fn</span> <span class='ident'>identity</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>RenderOnce</span> <span class='op'>+</span> <span class='lifetime'>&#39;static</span><span class='op'>&gt;</span>(<span class='ident'>something</span>: <span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>Box</span><span class='op'>&lt;</span><span class='ident'>RenderBox</span> <span class='op'>+</span> <span class='lifetime'>&#39;static</span><span class='op'>&gt;</span> {
    <span class='macro'>box_html</span><span class='macro'>!</span> {
        : <span class='ident'>something</span>
    }
}

<span class='comment'>// Mutate the environment</span>
<span class='kw'>fn</span> <span class='ident'>counter</span>() <span class='op'>-&gt;</span> <span class='ident'>Box</span><span class='op'>&lt;</span><span class='ident'>RenderMut</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>counter</span> <span class='op'>=</span> <span class='number'>0</span>;
    <span class='macro'>box_html</span><span class='macro'>!</span> {
        <span class='op'>|</span><span class='ident'>t</span><span class='op'>|</span> {
            <span class='macro'>write</span><span class='macro'>!</span>(<span class='ident'>t</span>, <span class='string'>&quot;{}&quot;</span>, <span class='ident'>counter</span>);
            <span class='ident'>counter</span> <span class='op'>+=</span> <span class='number'>1</span>;
        }
    }
}

<span class='comment'>// Borrow the environment.</span>
<span class='kw'>fn</span> <span class='ident'>say_hello</span>(<span class='ident'>name</span>: <span class='ident'>String</span>) <span class='op'>-&gt;</span> <span class='ident'>Box</span><span class='op'>&lt;</span><span class='ident'>Render</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>counter</span> <span class='op'>=</span> <span class='number'>0</span>;
    <span class='macro'>box_html</span><span class='macro'>!</span> {
        <span class='ident'>span</span> {
            : <span class='string'>&quot;Hello &quot;</span>;
            : <span class='kw-2'>&amp;</span><span class='ident'>name</span>;
            : <span class='string'>&quot;.&quot;</span>;
        }
    }
}
</pre>

<p><em>Note</em>: To avoid allocating, you can implement render manually instead of returning a boxed
template:</p>
<pre class='rust rust-example-rendered'>
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>horrorshow</span>;

<span class='kw'>use</span> <span class='ident'>horrorshow</span>::{<span class='ident'>RenderOnce</span>, <span class='ident'>TemplateBuffer</span>, <span class='ident'>Template</span>};

<span class='kw'>struct</span> <span class='ident'>Page</span><span class='op'>&lt;</span><span class='ident'>C</span><span class='op'>&gt;</span> {
    <span class='ident'>title</span>: <span class='ident'>String</span>,
    <span class='ident'>content</span>: <span class='ident'>C</span>,
}

<span class='kw'>impl</span> <span class='ident'>Page</span><span class='op'>&lt;</span><span class='ident'>String</span><span class='op'>&gt;</span> {
    <span class='kw'>fn</span> <span class='ident'>from_string_content</span>(<span class='ident'>title</span>: <span class='ident'>String</span>, <span class='ident'>content</span>: <span class='ident'>String</span>) <span class='op'>-&gt;</span> <span class='kw'>Self</span> {
        <span class='ident'>Page</span> { <span class='ident'>title</span>: <span class='ident'>title</span>, <span class='ident'>content</span>: <span class='ident'>content</span> }
    }
}

<span class='kw'>impl</span><span class='op'>&lt;</span><span class='ident'>C</span><span class='op'>&gt;</span> <span class='ident'>RenderOnce</span> <span class='kw'>for</span> <span class='ident'>Page</span><span class='op'>&lt;</span><span class='ident'>C</span><span class='op'>&gt;</span> <span class='kw'>where</span> <span class='ident'>C</span>: <span class='ident'>RenderOnce</span> {
    <span class='kw'>fn</span> <span class='ident'>render_once</span>(<span class='self'>self</span>, <span class='ident'>tmpl</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>TemplateBuffer</span>) {
        <span class='kw'>let</span> <span class='ident'>Page</span> {<span class='ident'>title</span>, <span class='ident'>content</span>} <span class='op'>=</span> <span class='self'>self</span>;
        <span class='comment'>// The actual template:</span>
        <span class='ident'>tmpl</span> <span class='op'>&lt;&lt;</span> <span class='macro'>html</span><span class='macro'>!</span> {
            <span class='ident'>article</span> {
                <span class='ident'>header</span> {
                    <span class='ident'>h1</span> : <span class='ident'>title</span>
                }
                <span class='ident'>section</span> : <span class='ident'>content</span>
            }
        };
    }
}

<span class='kw'>fn</span> <span class='ident'>main</span>() {
  <span class='kw'>let</span> <span class='ident'>page</span> <span class='op'>=</span> <span class='ident'>Page</span>::<span class='ident'>from_string_content</span>(<span class='ident'>String</span>::<span class='ident'>from</span>(<span class='string'>&quot;My title&quot;</span>),
                                       <span class='ident'>String</span>::<span class='ident'>from</span>(<span class='string'>&quot;Some content.&quot;</span>));
  <span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>page</span>.<span class='ident'>into_string</span>().<span class='ident'>unwrap</span>(),
             <span class='string'>&quot;&lt;article&gt;\
                &lt;header&gt;&lt;h1&gt;My title&lt;/h1&gt;&lt;/header&gt;\
                &lt;section&gt;Some content.&lt;/section&gt;\
              &lt;/article&gt;&quot;</span>);
}
</pre>

<h1 id="examples" class='section-header'><a
                           href="#examples">Examples</a></h1>
<p>See the test cases.</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='mod' href='prelude/index.html'
                               title='horrorshow::prelude'>prelude</a></td>
                        <td class='docblock short'>
                             <p>Traits that should always be imported.</p>

                        </td>
                    </tr>
                </table><h2 id='macros' class='section-header'><a href="#macros">Macros</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.box_html!.html'
                               title='horrorshow::box_html!'>box_html!</a></td>
                        <td class='docblock short'>
                             <p>Crate a new owned html template.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.html!.html'
                               title='horrorshow::html!'>html!</a></td>
                        <td class='docblock short'>
                             <p>Crate a new html template</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.raw!.html'
                               title='horrorshow::raw!'>raw!</a></td>
                        <td class='docblock short'>
                             <p>Mark a string as a raw. The string will not be rendered.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.template!.html'
                               title='horrorshow::template!'>template!</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                </table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Error.html'
                               title='horrorshow::Error'>Error</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.FnRenderer.html'
                               title='horrorshow::FnRenderer'>FnRenderer</a></td>
                        <td class='docblock short'>
                             <p>A template renderer. The <code>html! {}</code> macro returns a <code>FnRenderer</code>.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Raw.html'
                               title='horrorshow::Raw'>Raw</a></td>
                        <td class='docblock short'>
                             <p>Raw content marker.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.TemplateBuffer.html'
                               title='horrorshow::TemplateBuffer'>TemplateBuffer</a></td>
                        <td class='docblock short'>
                             <p>A template buffer. This is the type that gets passed to closures inside templates.</p>

                        </td>
                    </tr>
                </table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.Render.html'
                               title='horrorshow::Render'>Render</a></td>
                        <td class='docblock short'>
                             <p>Something that can be rendered by reference.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.RenderBox.html'
                               title='horrorshow::RenderBox'>RenderBox</a></td>
                        <td class='docblock short'>
                             <p>Something that can be rendered once out of a box.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.RenderMut.html'
                               title='horrorshow::RenderMut'>RenderMut</a></td>
                        <td class='docblock short'>
                             <p>Something that can be rendered by mutable reference.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.RenderOnce.html'
                               title='horrorshow::RenderOnce'>RenderOnce</a></td>
                        <td class='docblock short'>
                             <p>Something that can be rendered once.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.Template.html'
                               title='horrorshow::Template'>Template</a></td>
                        <td class='docblock short'>
                             <p>A template that can be rendered into something.</p>

                        </td>
                    </tr>
                </table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
            <p>
                Search functions by type signature (e.g.
                <code>vec -> usize</code>)
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "horrorshow";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>